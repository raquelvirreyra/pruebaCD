{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/chevi/Documents/RAQUEL/REPOSITORIOS/HIA/proyfrontendgrupo08/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Empleado } from 'src/app/models/empleado';\nimport { Usuario } from 'src/app/models/usuario';\nimport Swal from 'sweetalert2';\nimport 'sweetalert2/src/sweetalert2.scss';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/empleado.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/service/usuario.service\";\nimport * as i4 from \"../layout/header/header.component\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../layout/footer/footer.component\";\n\nfunction EmpleadoComponent_tr_22_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const depe_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(depe_r3.nombre);\n  }\n}\n\nfunction EmpleadoComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, EmpleadoComponent_tr_22_li_10_Template, 2, 1, \"li\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵelementStart(12, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function EmpleadoComponent_tr_22_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.eliminarEmpleado(item_r1);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 11);\n    i0.ɵɵelement(14, \"path\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(15, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function EmpleadoComponent_tr_22_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.modificarEmpleado(item_r1);\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(16, \"svg\", 14);\n    i0.ɵɵelement(17, \"path\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.Legajo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.Apellido);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.Nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.Email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r1.Dependencias);\n  }\n}\n\nexport let EmpleadoComponent = /*#__PURE__*/(() => {\n  class EmpleadoComponent {\n    constructor(empleadoService, route, usuarioService) {\n      this.empleadoService = empleadoService;\n      this.route = route;\n      this.usuarioService = usuarioService;\n\n      if (usuarioService.userLoggedIn() == false) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Acceso denegado',\n          text: 'Por favor inicia sesion.'\n        });\n        route.navigate(['login']);\n      }\n\n      this.cargarEmpleados();\n    }\n\n    ngOnInit() {}\n\n    agregarEmpleado() {\n      this.route.navigate(['formEmpleado', 0]);\n    }\n\n    modificarEmpleado(empleado) {\n      this.route.navigate(['formEmpleado', empleado._id]);\n    }\n\n    eliminarEmpleado(empleado) {\n      this.empleadoService.deleteEmpleado(empleado._id).subscribe(result => {\n        if (result.status == \"1\") {\n          Swal.fire({\n            position: 'center',\n            icon: 'success',\n            title: 'Empleado eliminado correctamente',\n            showConfirmButton: false,\n            timer: 1500\n          });\n          this.cargarEmpleados();\n        }\n      }, error => {\n        if (error.status == \"0\") {\n          Swal.fire({\n            position: 'center',\n            icon: 'error',\n            title: 'No se pudo eliminar',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      });\n    }\n\n    cargarEmpleados() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.empleados = new Array();\n        var usuarios = [];\n        var usuario;\n\n        _this.usuarioService.getUsuarios().subscribe(result => {\n          usuarios = new Array();\n          result.forEach(element => {\n            usuario = new Usuario();\n            Object.assign(usuario, element);\n            usuarios.push(usuario);\n          });\n        }, error => {});\n\n        _this.empleadoService.getEmpleados().subscribe(result => {\n          result.forEach(element => {\n            var b = false;\n            usuarios.forEach(elementt => {\n              if (elementt.empleado._id == element._id && elementt.username == \"admin\") {\n                b = true;\n              }\n            });\n\n            if (b == false) {\n              _this.empleado = new Empleado();\n              Object.assign(_this.empleado, element);\n\n              _this.empleados.push(_this.empleado);\n\n              _this.empleado = new Empleado();\n            } else {\n              b = false;\n            }\n          });\n        }, error => {});\n      })();\n    }\n\n  }\n\n  EmpleadoComponent.ɵfac = function EmpleadoComponent_Factory(t) {\n    return new (t || EmpleadoComponent)(i0.ɵɵdirectiveInject(i1.EmpleadoService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UsuarioService));\n  };\n\n  EmpleadoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmpleadoComponent,\n    selectors: [[\"app-empleado\"]],\n    decls: 50,\n    vars: 1,\n    consts: [[1, \"container-fluid\"], [1, \"container-xl\"], [1, \"row\"], [1, \"col-12\", \"m-3\", \"text-center\"], [1, \"table\", \"table-hover\", \"table-bordered\", \"table-responsive\"], [1, \"table-success\"], [2, \"width\", \"10%\"], [2, \"width\", \"20%\"], [4, \"ngFor\", \"ngForOf\"], [\"style\", \"list-style:none\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-warning\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-trash-fill\"], [\"d\", \"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-pen\"], [\"d\", \"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z\"], [2, \"list-style\", \"none\"]],\n    template: function EmpleadoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-header\");\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"h2\", 3);\n        i0.ɵɵtext(5, \"Listado de Empleados\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"table\", 4);\n        i0.ɵɵelementStart(7, \"thead\", 5);\n        i0.ɵɵelementStart(8, \"tr\");\n        i0.ɵɵelementStart(9, \"th\", 6);\n        i0.ɵɵtext(10, \" Legajo \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\", 7);\n        i0.ɵɵtext(12, \" Apellido \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"th\", 7);\n        i0.ɵɵtext(14, \" Nombre \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"th\", 7);\n        i0.ɵɵtext(16, \" Email \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\", 7);\n        i0.ɵɵtext(18, \" Dependencia \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\", 6);\n        i0.ɵɵtext(20, \" Acciones \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"tbody\");\n        i0.ɵɵtemplate(22, EmpleadoComponent_tr_22_Template, 18, 5, \"tr\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"br\");\n        i0.ɵɵelement(24, \"br\");\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵelement(26, \"br\");\n        i0.ɵɵelement(27, \"br\");\n        i0.ɵɵelement(28, \"br\");\n        i0.ɵɵelement(29, \"br\");\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelement(32, \"br\");\n        i0.ɵɵelement(33, \"br\");\n        i0.ɵɵelement(34, \"br\");\n        i0.ɵɵelement(35, \"br\");\n        i0.ɵɵelement(36, \"br\");\n        i0.ɵɵelement(37, \"br\");\n        i0.ɵɵelement(38, \"br\");\n        i0.ɵɵelement(39, \"br\");\n        i0.ɵɵelement(40, \"br\");\n        i0.ɵɵelement(41, \"br\");\n        i0.ɵɵelement(42, \"br\");\n        i0.ɵɵelement(43, \"br\");\n        i0.ɵɵelement(44, \"br\");\n        i0.ɵɵelement(45, \"br\");\n        i0.ɵɵelement(46, \"br\");\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelement(48, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"app-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"ngForOf\", ctx.empleados);\n      }\n    },\n    directives: [i4.HeaderComponent, i5.NgForOf, i6.FooterComponent],\n    styles: [\"\"]\n  });\n  return EmpleadoComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}