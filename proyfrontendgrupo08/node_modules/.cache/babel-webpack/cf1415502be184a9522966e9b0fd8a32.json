{"ast":null,"code":"import { Empleado } from 'src/app/models/empleado';\nimport { Usuario } from 'src/app/models/usuario';\nimport Swal from 'sweetalert2';\nimport 'sweetalert2/src/sweetalert2.scss';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/usuario.service\";\nimport * as i3 from \"../layout/header/header.component\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../layout/footer/footer.component\";\n\nfunction UsuarioFormComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Campo Obligatorio!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsuarioFormComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, UsuarioFormComponent_div_17_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r1 = i0.ɵɵreference(16);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors == null ? null : _r1.errors[\"required\"]);\n  }\n}\n\nfunction UsuarioFormComponent_div_23_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Campo Obligatorio!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsuarioFormComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, UsuarioFormComponent_div_23_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r3 = i0.ɵɵreference(22);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors == null ? null : _r3.errors[\"required\"]);\n  }\n}\n\nfunction UsuarioFormComponent_option_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r13 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", item_r13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", item_r13.Apellido, \", \", item_r13.Nombre, \" \");\n  }\n}\n\nfunction UsuarioFormComponent_div_30_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Campo Obligatorio!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsuarioFormComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, UsuarioFormComponent_div_30_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r5 = i0.ɵɵreference(28);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors == null ? null : _r5.errors[\"required\"]);\n  }\n}\n\nfunction UsuarioFormComponent_div_40_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Campo Obligatorio!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UsuarioFormComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtemplate(1, UsuarioFormComponent_div_40_div_1_Template, 2, 0, \"div\", 24);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r8 = i0.ɵɵreference(35);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r8.errors == null ? null : _r8.errors[\"required\"]);\n  }\n}\n\nfunction UsuarioFormComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1, \"Usuario guardado correctamente!! \");\n    i0.ɵɵelementStart(2, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function UsuarioFormComponent_div_43_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.loginForm();\n    });\n    i0.ɵɵtext(3, \"Iniciar Sesion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let UsuarioFormComponent = /*#__PURE__*/(() => {\n  class UsuarioFormComponent {\n    constructor(router, usuarioService) {\n      this.router = router;\n      this.usuarioService = usuarioService;\n      this.save = false;\n      this.usuarios = [];\n      this.usuario = new Usuario();\n      this.getEmpleados();\n      this.usuarios = new Array();\n      this.getUsuarios();\n    }\n\n    altaUsuario() {\n      if (this.comprobarCuenta() == true) {\n        Swal.fire({\n          position: 'center',\n          icon: 'error',\n          title: 'El empleado ya posee cuenta!',\n          showConfirmButton: false,\n          timer: 1800\n        });\n      } else {\n        this.usuarioService.altaUsuario(this.usuario).subscribe(result => {\n          if (result.status == \"1\") {\n            this.save = true;\n            Swal.fire({\n              position: 'center',\n              icon: 'success',\n              title: 'Usuario creado correctamente!',\n              showConfirmButton: false,\n              timer: 1800\n            });\n            this.router.navigate(['login']);\n          }\n        }, error => {\n          if (error.status == \"0\") {\n            this.save = false;\n            console.log(error.msg);\n            Swal.fire({\n              position: 'center',\n              icon: 'error',\n              title: 'Algo salio muy mal!',\n              showConfirmButton: false,\n              timer: 1800\n            });\n          }\n        });\n      }\n    }\n\n    getEmpleados() {\n      this.usuarioService.getEmpleados().subscribe(result => {\n        this.empleados = new Array();\n\n        for (let i = 0; i < result.length; i++) {\n          if (result[i].Nombre != \"admin\") {\n            this.empleado = new Empleado();\n            Object.assign(this.empleado, result[i]);\n            this.empleados.push(this.empleado);\n          }\n        }\n      }, error => {});\n    }\n\n    getUsuarios() {\n      this.usuarioService.getUsuarios().subscribe(result => {\n        result.forEach(element => {\n          this.usuario = new Usuario();\n          Object.assign(this.usuario, element);\n          this.usuarios.push(this.usuario);\n        });\n        this.usuario = new Usuario();\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    comprobarCuenta() {\n      var bool = false;\n      this.usuarios.forEach(elementt => {\n        if (this.usuario.empleado._id == elementt.empleado._id) {\n          bool = true;\n        }\n      });\n      return bool;\n    }\n\n    loginForm() {\n      this.router.navigate(['login']);\n    }\n\n    ngOnInit() {}\n\n  }\n\n  UsuarioFormComponent.ɵfac = function UsuarioFormComponent_Factory(t) {\n    return new (t || UsuarioFormComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UsuarioService));\n  };\n\n  UsuarioFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UsuarioFormComponent,\n    selectors: [[\"app-usuario-form\"]],\n    decls: 56,\n    vars: 11,\n    consts: [[1, \"container-fluid\"], [1, \"container-xl\"], [1, \"row\", \"justify-content-center\"], [1, \"col-12\", \"col-md-6\"], [\"action\", \"\", 1, \"border\", \"rounded-3\", \"p-3\"], [\"usuarioForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"username\", 1, \"mt-3\"], [\"type\", \"text\", \"name\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"password\", 1, \"mt-3\"], [\"type\", \"password\", \"name\", \"password\", \"id\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"for\", \"empleado\", 1, \"mt-3\"], [\"name\", \"empleado\", \"id\", \"empleado\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [\"empleado\", \"ngModel\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"perfil\", 1, \"mt-3\"], [\"name\", \"perfil\", \"id\", \"perfil\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [\"perfil\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"mt-4\", \"mb-3\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"text-danger\"], [4, \"ngIf\"], [3, \"ngValue\"], [1, \"alert\", \"alert-success\"], [1, \"btn\", \"btn-primary\", \"ms-2\", 3, \"click\"]],\n    template: function UsuarioFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-header\");\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"h1\");\n        i0.ɵɵtext(9, \"Alta de Usuario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 4, 5);\n        i0.ɵɵelementStart(12, \"div\", 6);\n        i0.ɵɵelementStart(13, \"label\", 7);\n        i0.ɵɵtext(14, \"Nombre de Usuario:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuarioFormComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.usuario.username = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, UsuarioFormComponent_div_17_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 6);\n        i0.ɵɵelementStart(19, \"label\", 11);\n        i0.ɵɵtext(20, \"Contrase\\u00F1a\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"input\", 12, 13);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuarioFormComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.usuario.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, UsuarioFormComponent_div_23_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"div\", 6);\n        i0.ɵɵelementStart(25, \"label\", 14);\n        i0.ɵɵtext(26, \"Empleado\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"select\", 15, 16);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuarioFormComponent_Template_select_ngModelChange_27_listener($event) {\n          return ctx.usuario.empleado = $event;\n        });\n        i0.ɵɵtemplate(29, UsuarioFormComponent_option_29_Template, 2, 3, \"option\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, UsuarioFormComponent_div_30_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 6);\n        i0.ɵɵelementStart(32, \"label\", 18);\n        i0.ɵɵtext(33, \"Perfil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"select\", 19, 20);\n        i0.ɵɵlistener(\"ngModelChange\", function UsuarioFormComponent_Template_select_ngModelChange_34_listener($event) {\n          return ctx.usuario.perfil = $event;\n        });\n        i0.ɵɵelementStart(36, \"option\");\n        i0.ɵɵtext(37, \"Administrador\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"option\");\n        i0.ɵɵtext(39, \"Participante\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(40, UsuarioFormComponent_div_40_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function UsuarioFormComponent_Template_button_click_41_listener() {\n          return ctx.altaUsuario();\n        });\n        i0.ɵɵtext(42, \"Guardar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(43, UsuarioFormComponent_div_43_Template, 4, 0, \"div\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"br\");\n        i0.ɵɵelement(45, \"br\");\n        i0.ɵɵelement(46, \"br\");\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelement(48, \"br\");\n        i0.ɵɵelement(49, \"br\");\n        i0.ɵɵelement(50, \"br\");\n        i0.ɵɵelement(51, \"br\");\n        i0.ɵɵelement(52, \"br\");\n        i0.ɵɵelement(53, \"br\");\n        i0.ɵɵelement(54, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(55, \"app-footer\");\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(11);\n\n        const _r1 = i0.ɵɵreference(16);\n\n        const _r3 = i0.ɵɵreference(22);\n\n        const _r5 = i0.ɵɵreference(28);\n\n        const _r8 = i0.ɵɵreference(35);\n\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.username);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r1.invalid && (_r1.dirty || _r1.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.password);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r3.invalid && (_r3.dirty || _r3.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.empleado);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.empleados);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r5.invalid && (_r5.dirty || _r5.touched));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.usuario.perfil);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", _r8.invalid && (_r8.dirty || _r8.touched));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.save);\n      }\n    },\n    directives: [i3.HeaderComponent, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.DefaultValueAccessor, i4.RequiredValidator, i4.NgControlStatus, i4.NgModel, i5.NgIf, i4.SelectControlValueAccessor, i5.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i6.FooterComponent],\n    styles: [\"\"]\n  });\n  return UsuarioFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}